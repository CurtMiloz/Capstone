var map,table_coords,table_refs,length,width,errList=[],square_size=100,editTables=!1;function parseFiles(){map=[],width=length=10;for(var e=0;e<length;e++){map.push([]);for(var o=0;o<width;o++)map[e].push("0")}map[0][0]=3,table_coords=[]}function save(){mapFile=length+","+width+"\n";for(var e=0;e<length;e++){map.push([]);for(var o=0;o<width;o++)o==width-1?mapFile+=map[e][o]:mapFile=mapFile+map[e][o]+",";e!=length-1&&(mapFile+="\n")}console.log(mapFile)}function onClickChange(e,o){console.log("merp i = "+e+", j = "+o),editTables||(map[e][o]=(map[e][o]+1)%4,updateMap())}function updateMap(){var e="";table_coords=[],table_refs=[],count_tblRef=0;var o=100;console.log("len"+length);for(var t=0;t<length;t++){for(var n=0,r=0;r<width;r++){var a="",l='<div style =  " display:block;float:left;    left:'+n+"px; top:"+o+'px;"',i="";"0"==map[t][r]?i=' onclick = "onClickChange('+t+","+r+')" id = "clear"':"1"==map[t][r]?i=' onclick = "onClickChange('+t+","+r+')" id = "blocked"':"2"==map[t][r]?(i=' onclick = "onClickChange('+t+","+r+')" id = "table"',a="Table",table_refs.push(count_tblRef),table_coords.push([t,r]),count_tblRef+=1):"3"==map[t][r]&&(i=' onclick = "onClickChange('+t+","+r+')" id = "base"',a="Home"),e+=l=l+i+">"+a+"</div>",n+=square_size}e+="<br>",o+=square_size}console.log("table coords:"),console.log(table_coords),console.log("tableCount: "+count_tblRef),document.getElementById("board").innerHTML=e,console.log(document.getElementById("board"))}function load(){}function setErrorList(e){var o=e;1==(o&&1)&&("LowLiquid <br>",errList.push("Low Liquid")),16==(o&&16)&&("LeakingTank <br>",errList.push("Leaking Tank")),256==(o&&256)&&("LowBattery <br>",errList.push("Low Battery")),4096==(o&&4096)&&("NoMovement <br>",errList.push("No Movement")),renderErrors()}function renderErrors(){var e=document.getElementById("errorContainer");for(x in console.log(e),errList){console.log(errList[x]);var o=errList[x];$(e).append('<div class="row text-center ml-5 w-25 "><div class="card card-body text-center text-white bg-danger o-hidden h-100 w-25">'+o+"</div></div><br>"),console.log(e)}}function createCORSRequest(e,o){var t=new XMLHttpRequest;return"withCredentials"in t?t.open(e,o,!0):"undefined"!=typeof XDomainRequest?(t=new XDomainRequest).open(e,o):t=null,t}function Login(){form=document.getElementById("loginForm"),userid=form.user.value,passwd=form.pass.value,NetworkCall("login",[userid,passwd])}function navigate(e){window.location.href=e}function NetworkCall(e,o){var t=new XMLHttpRequest;if("login"==e){if(!(t=createCORSRequest("POST","/proxy/login")))throw new Error("CORS not supported");var n=String(o[0])+":"+String(o[1]),r=btoa(n);t.setRequestHeader("Authorization","Basic "+r),t.onload=function(){t.responseText},t.onerror=function(){console.log("error")},t.onreadystatechange=function(){200==t.status?navigate("../index.html"):console.log("Error: "+t.responseText)}}else if("getErrors"==e){if(!(t=createCORSRequest("GET","/proxy/errors")))throw new Error("CORS not supported");t.onload=function(){t.responseText},t.onerror=function(){console.log("error")},t.onreadystatechange=function(){200==t.status?setErrorList(t.responseText):console.log("Error: "+t.responseText)}}t.send()}window.onload=function(){x=document.getElementById("lowLiquid"),path=document.location.pathname,"localhost"==document.location.hostname&&3e3==document.location.port?"/"==path||"/index.html"==path?"localhost"==document.location.hostname&&3e3==document.location.port&&setErrorList(15):"/charts.html"==path&&(parseFiles(),updateMap()):"/"==path||"/index.html"==path?NetworkCall("getErrors"):"/charts.html"==path&&(parseFiles(),updateMap())};